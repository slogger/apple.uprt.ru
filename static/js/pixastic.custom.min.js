var Pixastic=function(){function a(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function b(b){var c=!1,d=function(){c||(c=!0,b())};document.write('<script defer src="//:" id="__onload_ie_pixastic__"></script>');var e=document.getElementById("__onload_ie_pixastic__");e.onreadystatechange=function(){"complete"==e.readyState&&(e.parentNode.removeChild(e),d())},document.addEventListener&&document.addEventListener("DOMContentLoaded",d,!1),a(window,"load",d)}function c(){for(var a=d("pixastic",null,"img"),b=d("pixastic",null,"canvas"),c=a.concat(b),e=0;c.length>e;e++)(function(){for(var a=c[e],b=[],d=a.className.split(" "),f=0;d.length>f;f++){var g=d[f];if("pixastic-"==g.substring(0,9)){var h=g.substring(9);""!=h&&b.push(h)}}if(b.length)if("img"==a.tagName.toLowerCase()){var i=new Image;if(i.src=a.src,i.complete)for(var j=0;b.length>j;j++){var k=Pixastic.applyAction(a,a,b[j],null);k&&(a=k)}else i.onload=function(){for(var c=0;b.length>c;c++){var d=Pixastic.applyAction(a,a,b[c],null);d&&(a=d)}}}else setTimeout(function(){for(var c=0;b.length>c;c++){var d=Pixastic.applyAction(a,a,b[c],null);d&&(a=d)}},1)})()}function d(a,b,c){var d=Array();null==b&&(b=document),null==c&&(c="*");var e=b.getElementsByTagName(c),f=e.length,g=RegExp("(^|\\s)"+a+"(\\s|$)");for(i=0,j=0;f>i;i++)g.test(e[i].className)&&(d[j]=e[i],j++);return d}function f(a,b){if(Pixastic.debug)try{switch(b){case"warn":console.warn("Pixastic:",a);break;case"error":console.error("Pixastic:",a);break;default:console.log("Pixastic:",a)}}catch(c){}}"undefined"!=typeof pixastic_parseonload&&pixastic_parseonload&&b(c);var g=function(){var a=document.createElement("canvas"),b=!1;try{b=!("function"!=typeof a.getContext||!a.getContext("2d"))}catch(c){}return function(){return b}}(),h=function(){var c,a=document.createElement("canvas"),b=!1;try{"function"==typeof a.getContext&&(c=a.getContext("2d"))&&(b="function"==typeof c.getImageData)}catch(d){}return function(){return b}}(),k=function(){var a=!1,b=document.createElement("canvas");if(g()&&h()){b.width=b.height=1;var c=b.getContext("2d");c.fillStyle="rgb(255,0,0)",c.fillRect(0,0,1,1);var d=document.createElement("canvas");d.width=d.height=1;var e=d.getContext("2d");e.fillStyle="rgb(0,0,255)",e.fillRect(0,0,1,1),c.globalAlpha=.5,c.drawImage(d,0,0);var f=c.getImageData(0,0,1,1).data;a=255!=f[2]}return function(){return a}}();return{parseOnLoad:!1,debug:!1,applyAction:function(a,b,c,d){d=d||{};var e="canvas"==a.tagName.toLowerCase();if(e&&Pixastic.Client.isIE())return Pixastic.debug&&f("Tried to process a canvas element but browser is IE."),!1;var g,h,i=!1;Pixastic.Client.hasCanvas()&&(i=!!d.resultCanvas,g=d.resultCanvas||document.createElement("canvas"),h=g.getContext("2d"));var j=a.offsetWidth,k=a.offsetHeight;if(e&&(j=a.width,k=a.height),0==j||0==k){if(null!=a.parentNode)return Pixastic.debug&&f("Image has 0 width and/or height."),void 0;var l=a.style.position,m=a.style.left;a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),j=a.offsetWidth,k=a.offsetHeight,document.body.removeChild(a),a.style.position=l,a.style.left=m}if(c.indexOf("(")>-1){var n=c;c=n.substr(0,n.indexOf("("));var o=n.match(/\((.*?)\)/);if(o[1]){o=o[1].split(";");for(var p=0;o.length>p;p++)if(thisArg=o[p].split("="),2==thisArg.length)if("rect"==thisArg[0]){var q=thisArg[1].split(",");d[thisArg[0]]={left:parseInt(q[0],10)||0,top:parseInt(q[1],10)||0,width:parseInt(q[2],10)||0,height:parseInt(q[3],10)||0}}else d[thisArg[0]]=thisArg[1]}}d.rect?(d.rect.left=Math.round(d.rect.left),d.rect.top=Math.round(d.rect.top),d.rect.width=Math.round(d.rect.width),d.rect.height=Math.round(d.rect.height)):d.rect={left:0,top:0,width:j,height:k};var r=!1;if(Pixastic.Actions[c]&&"function"==typeof Pixastic.Actions[c].process&&(r=!0),!r)return Pixastic.debug&&f('Invalid action "'+c+'". Maybe file not included?'),!1;if(!Pixastic.Actions[c].checkSupport())return Pixastic.debug&&f('Action "'+c+'" not supported by this browser.'),!1;Pixastic.Client.hasCanvas()?(g!==a&&(g.width=j,g.height=k),i||(g.style.width=j+"px",g.style.height=k+"px"),h.drawImage(b,0,0,j,k),a.__pixastic_org_image?(g.__pixastic_org_image=a.__pixastic_org_image,g.__pixastic_org_width=a.__pixastic_org_width,g.__pixastic_org_height=a.__pixastic_org_height):(g.__pixastic_org_image=a,g.__pixastic_org_width=j,g.__pixastic_org_height=k)):Pixastic.Client.isIE()&&a.__pixastic_org_style===void 0&&(a.__pixastic_org_style=a.style.cssText);var s={image:a,canvas:g,width:j,height:k,useData:!0,options:d},t=Pixastic.Actions[c].process(s);return t?Pixastic.Client.hasCanvas()?(s.useData&&Pixastic.Client.hasCanvasImageData()&&(g.getContext("2d").putImageData(s.canvasData,d.rect.left,d.rect.top),g.getContext("2d").fillRect(0,0,0,0)),d.leaveDOM||(g.title=a.title,g.imgsrc=a.imgsrc,e||(g.alt=a.alt),e||(g.imgsrc=a.src),g.className=a.className,g.style.cssText=a.style.cssText,g.name=a.name,g.tabIndex=a.tabIndex,g.id=a.id,a.parentNode&&a.parentNode.replaceChild&&a.parentNode.replaceChild(g,a)),d.resultCanvas=g,g):a:!1},prepareData:function(a,b){var c=a.canvas.getContext("2d"),d=a.options.rect,e=c.getImageData(d.left,d.top,d.width,d.height),f=e.data;return b||(a.canvasData=e),f},process:function(a,b,c,d){if("img"==a.tagName.toLowerCase()){var e=new Image;if(e.src=a.src,e.complete){var f=Pixastic.applyAction(a,e,b,c);return d&&d(f),f}e.onload=function(){var f=Pixastic.applyAction(a,e,b,c);d&&d(f)}}if("canvas"==a.tagName.toLowerCase()){var f=Pixastic.applyAction(a,a,b,c);return d&&d(f),f}},revert:function(a){if(Pixastic.Client.hasCanvas()){if("canvas"==a.tagName.toLowerCase()&&a.__pixastic_org_image)return a.width=a.__pixastic_org_width,a.height=a.__pixastic_org_height,a.getContext("2d").drawImage(a.__pixastic_org_image,0,0),a.parentNode&&a.parentNode.replaceChild&&a.parentNode.replaceChild(a.__pixastic_org_image,a),a}else Pixastic.Client.isIE()&&a.__pixastic_org_style!==void 0&&(a.style.cssText=a.__pixastic_org_style)},Client:{hasCanvas:g,hasCanvasImageData:h,hasGlobalAlpha:k,isIE:function(){return!!document.all&&!!window.attachEvent&&!window.opera}},Actions:{}}}();"undefined"!=typeof jQuery&&jQuery&&jQuery.fn&&(jQuery.fn.pixastic=function(a,b){var c=[];return this.each(function(){if("img"!=this.tagName.toLowerCase()||this.complete){var d=Pixastic.process(this,a,b);d&&c.push(d)}}),c.length>0?jQuery(c):this}),Pixastic.Actions.blend={process:function(a){var b=parseFloat(a.options.amount),c=(a.options.mode||"normal").toLowerCase(),d=a.options.image;if(b=Math.max(0,Math.min(1,b)),!d)return!1;if(Pixastic.Client.hasCanvasImageData()){var e=a.options.rect,f=Pixastic.prepareData(a),g=e.width,h=e.height;a.useData=!1;var i=document.createElement("canvas");i.width=a.canvas.width,i.height=a.canvas.height;var j=i.getContext("2d");j.drawImage(d,0,0);var p,q,r,s,t,u,v,w,x,y,z,A,B,C,k={canvas:i,options:a.options},l=Pixastic.prepareData(k),m=k.canvasData,n=g*h,o=4*n,D=!1;switch(c){case"normal":break;case"multiply":for(;n--;)l[o-=4]=f[o]*l[o]/255,l[p=o+1]=f[p]*l[p]/255,l[q=o+2]=f[q]*l[q]/255;D=!0;break;case"lighten":for(;n--;)(r=f[o-=4])>l[o]&&(l[o]=r),(s=f[p=o+1])>l[p]&&(l[p]=s),(t=f[q=o+2])>l[q]&&(l[q]=t);D=!0;break;case"darken":for(;n--;)(r=f[o-=4])<l[o]&&(l[o]=r),(s=f[p=o+1])<l[p]&&(l[p]=s),(t=f[q=o+2])<l[q]&&(l[q]=t);D=!0;break;case"darkercolor":for(;n--;).3*(r=f[o-=4])+.59*(s=f[p=o+1])+.11*(t=f[q=o+2])<=.3*l[o]+.59*l[p]+.11*l[q]&&(l[o]=r,l[p]=s,l[q]=t);D=!0;break;case"lightercolor":for(;n--;).3*(r=f[o-=4])+.59*(s=f[p=o+1])+.11*(t=f[q=o+2])>.3*l[o]+.59*l[p]+.11*l[q]&&(l[o]=r,l[p]=s,l[q]=t);D=!0;break;case"lineardodge":for(;n--;)l[o]=(x=f[o-=4]+l[o])>255?255:x,l[p]=(y=f[p=o+1]+l[p])>255?255:y,l[q]=(z=f[q=o+2]+l[q])>255?255:z;D=!0;break;case"linearburn":for(;n--;)l[o]=255>(x=f[o-=4]+l[o])?0:x-255,l[p]=255>(y=f[p=o+1]+l[p])?0:y-255,l[q]=255>(z=f[q=o+2]+l[q])?0:z-255;D=!0;break;case"difference":for(;n--;)l[o]=0>(x=f[o-=4]-l[o])?-x:x,l[p]=0>(y=f[p=o+1]-l[p])?-y:y,l[q]=0>(z=f[q=o+2]-l[q])?-z:z;D=!0;break;case"screen":for(;n--;)l[o-=4]=255-((255-l[o])*(255-f[o])>>8),l[p=o+1]=255-((255-l[p])*(255-f[p])>>8),l[q=o+2]=255-((255-l[q])*(255-f[q])>>8);D=!0;break;case"exclusion":for(var E=2/255;n--;)l[o-=4]=(r=f[o])-(r*E-1)*l[o],l[p=o+1]=(s=f[p])-(s*E-1)*l[p],l[q=o+2]=(t=f[q])-(t*E-1)*l[q];D=!0;break;case"overlay":for(var E=2/255;n--;)l[o]=128>(r=f[o-=4])?l[o]*r*E:255-(255-l[o])*(255-r)*E,l[p]=128>(s=f[p=o+1])?l[p]*s*E:255-(255-l[p])*(255-s)*E,l[q]=128>(t=f[q=o+2])?l[q]*t*E:255-(255-l[q])*(255-t)*E;D=!0;break;case"softlight":for(var E=2/255;n--;)l[o]=128>(r=f[o-=4])?((l[o]>>1)+64)*r*E:255-(191-(l[o]>>1))*(255-r)*E,l[p]=128>(s=f[p=o+1])?((l[p]>>1)+64)*s*E:255-(191-(l[p]>>1))*(255-s)*E,l[q]=128>(t=f[q=o+2])?((l[q]>>1)+64)*t*E:255-(191-(l[q]>>1))*(255-t)*E;D=!0;break;case"hardlight":for(var E=2/255;n--;)l[o]=128>(u=l[o-=4])?f[o]*u*E:255-(255-f[o])*(255-u)*E,l[p]=128>(v=l[p=o+1])?f[p]*v*E:255-(255-f[p])*(255-v)*E,l[q]=128>(w=l[q=o+2])?f[q]*w*E:255-(255-f[q])*(255-w)*E;D=!0;break;case"colordodge":for(;n--;)l[o]=(x=(f[o-=4]<<8)/(255-(u=l[o])))>255||255==u?255:x,l[p]=(y=(f[p=o+1]<<8)/(255-(v=l[p])))>255||255==v?255:y,l[q]=(z=(f[q=o+2]<<8)/(255-(w=l[q])))>255||255==w?255:z;D=!0;break;case"colorburn":for(;n--;)l[o]=0>(x=255-(255-f[o-=4]<<8)/l[o])||0==l[o]?0:x,l[p]=0>(y=255-(255-f[p=o+1]<<8)/l[p])||0==l[p]?0:y,l[q]=0>(z=255-(255-f[q=o+2]<<8)/l[q])||0==l[q]?0:z;D=!0;break;case"linearlight":for(;n--;)l[o]=0>(x=2*(u=l[o-=4])+f[o]-256)||128>u&&0>x?0:x>255?255:x,l[p]=0>(y=2*(v=l[p=o+1])+f[p]-256)||128>v&&0>y?0:y>255?255:y,l[q]=0>(z=2*(w=l[q=o+2])+f[q]-256)||128>w&&0>z?0:z>255?255:z;D=!0;break;case"vividlight":for(;n--;)l[o]=128>(u=l[o-=4])?u?0>(x=255-(255-f[o]<<8)/(2*u))?0:x:0:255>(x=A=2*u-256)?(x=(f[o]<<8)/(255-A))>255?255:x:0>x?0:x,l[p]=128>(v=l[p=o+1])?v?0>(y=255-(255-f[p]<<8)/(2*v))?0:y:0:255>(y=B=2*v-256)?(y=(f[p]<<8)/(255-B))>255?255:y:0>y?0:y,l[q]=128>(w=l[q=o+2])?w?0>(z=255-(255-f[q]<<8)/(2*w))?0:z:0:255>(z=C=2*w-256)?(z=(f[q]<<8)/(255-C))>255?255:z:0>z?0:z;D=!0;break;case"pinlight":for(;n--;)l[o]=128>(u=l[o-=4])?(r=f[o])<(A=2*u)?r:A:(r=f[o])>(A=2*u-256)?r:A,l[p]=128>(v=l[p=o+1])?(s=f[p])<(B=2*v)?s:B:(s=f[p])>(B=2*v-256)?s:B,l[q]=128>(u=l[q=o+2])?(r=f[q])<(A=2*u)?r:A:(r=f[q])>(A=2*u-256)?r:A;D=!0;break;case"hardmix":for(;n--;)l[o]=128>(u=l[o-=4])?128>255-(255-f[o]<<8)/(2*u)||0==u?0:255:255>(A=2*u-256)&&128>(f[o]<<8)/(255-A)?0:255,l[p]=128>(v=l[p=o+1])?128>255-(255-f[p]<<8)/(2*v)||0==v?0:255:255>(B=2*v-256)&&128>(f[p]<<8)/(255-B)?0:255,l[q]=128>(w=l[q=o+2])?128>255-(255-f[q]<<8)/(2*w)||0==w?0:255:255>(C=2*w-256)&&128>(f[q]<<8)/(255-C)?0:255;D=!0}if(D&&j.putImageData(m,0,0),1==b||Pixastic.Client.hasGlobalAlpha()){var K=a.canvas.getContext("2d");K.save(),K.globalAlpha=b,K.drawImage(i,0,0,e.width,e.height,e.left,e.top,e.width,e.height),K.globalAlpha=1,K.restore()}else{for(var n=g*h,F=b,G=1-b;n--;){var o=4*n,H=f[o]*G+l[o]*F>>0,I=f[o+1]*G+l[o+1]*F>>0,J=f[o+2]*G+l[o+2]*F>>0;f[o]=H,f[o+1]=I,f[o+2]=J}a.useData=!0}return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.crop={process:function(a){if(Pixastic.Client.hasCanvas()){var b=a.options.rect,c=b.width,d=b.height,e=b.top,f=b.left;a.options.left!==void 0&&(f=parseInt(a.options.left,10)),a.options.top!==void 0&&(e=parseInt(a.options.top,10)),a.options.height!==void 0&&(c=parseInt(a.options.width,10)),a.options.height!==void 0&&(d=parseInt(a.options.height,10)),0>f&&(f=0),f>a.width-1&&(f=a.width-1),0>e&&(e=0),e>a.height-1&&(e=a.height-1),1>c&&(c=1),f+c>a.width&&(c=a.width-f),1>d&&(d=1),e+d>a.height&&(d=a.height-e);var g=document.createElement("canvas");return g.width=a.width,g.height=a.height,g.getContext("2d").drawImage(a.canvas,0,0),a.canvas.width=c,a.canvas.height=d,a.canvas.getContext("2d").clearRect(0,0,c,d),a.canvas.getContext("2d").drawImage(g,f,e,c,d,0,0,c,d),a.useData=!1,!0}},checkSupport:function(){return Pixastic.Client.hasCanvas()}},Pixastic.Actions.desaturate={process:function(a){var b=!(!a.options.average||"false"==a.options.average);if(Pixastic.Client.hasCanvasImageData()){var i,j,c=Pixastic.prepareData(a),d=a.options.rect,e=d.width,f=d.height,g=e*f,h=4*g;if(b)for(;g--;)c[h-=4]=c[i=h+1]=c[j=h+2]=(c[h]+c[i]+c[j])/3;else for(;g--;)c[h-=4]=c[i=h+1]=c[j=h+2]=.3*c[h]+.59*c[i]+.11*c[j];return!0}return Pixastic.Client.isIE()?(a.image.style.filter+=" gray",!0):void 0},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()||Pixastic.Client.isIE()}};